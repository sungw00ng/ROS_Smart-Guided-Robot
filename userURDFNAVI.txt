ì¢‹ì•„ìš”! ROS 2 Foxy ê¸°ì¤€ìœ¼ë¡œ Navigation2 + URDF + RViz Waypoint Navigationê¹Œì§€ ì„¸íŒ…í•˜ëŠ” ì „ì²´ íë¦„ì„ ì •ë¦¬í•´ì„œ ë‹¨ê³„ë³„ë¡œ ë§Œë“¤ì–´ë³¼ê²Œìš”.

âœ… ëª©í‘œ
RVizì—ì„œ Waypointë§Œ ì°ìœ¼ë©´, ë¡œë´‡ì´ ìŠ¤ìŠ¤ë¡œ ì´ë™í•˜ë„ë¡ Navigation2ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
ì¡°ì´ìŠ¤í‹±/ì»¨íŠ¸ë¡¤ëŸ¬ ì—†ì´ cmd_velë§Œìœ¼ë¡œ ì›€ì§ì´ë©°, í•„ìš”í•œ ìµœì†Œ ìš”ì†Œë§Œ ì ìš©í•©ë‹ˆë‹¤.

ğŸ§© 1ë‹¨ê³„: URDF í™•ì¥ (Foxy + Navigation2 í˜¸í™˜)
âœ… ë³€ê²½ ìš”ì•½
ë°”í€´ ë§í¬ ë¶„ë¦¬: wheel_left, wheel_rightë¡œ êµ¬ì²´í™”

odom í”„ë ˆì„ ì¶”ê°€: odom â†’ base_link â†’ laser

TF ì—°ê²° êµ¬ì¡°:

arduino
ë³µì‚¬
í¸ì§‘
map â†’ odom â†’ base_link â†’ wheel_left / wheel_right / laser ...
ğŸ› ï¸ ì˜ˆì‹œ ìˆ˜ì •ëœ URDF ì¼ë¶€
(ì „ì²´ URDF íŒŒì¼ ì¤‘ ìˆ˜ì •ì´ í•„ìš”í•œ ë¶€ë¶„ ì˜ˆì‹œ)

xml
ë³µì‚¬
í¸ì§‘
<link name="wheel_left">
  <visual>
    <origin xyz="0.0 0.135 0.05" rpy="0 1.5707 0"/>
    <geometry>
      <cylinder length="0.03" radius="0.05"/>
    </geometry>
    <material name="black"/>
  </visual>
</link>

<joint name="joint_wheel_left" type="continuous">
  <parent link="base_link"/>
  <child link="wheel_left"/>
  <origin xyz="-0.12 0.135 0.05" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
</joint>

<link name="wheel_right">
  <visual>
    <origin xyz="0.0 -0.135 0.05" rpy="0 1.5707 0"/>
    <geometry>
      <cylinder length="0.03" radius="0.05"/>
    </geometry>
    <material name="black"/>
  </visual>
</link>

<joint name="joint_wheel_right" type="continuous">
  <parent link="base_link"/>
  <child link="wheel_right"/>
  <origin xyz="-0.12 -0.135 0.05" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
</joint>
ğŸ’¡ ê¸°ì¡´ì— back_wheels / front_wheels ë¬¶ì¸ ë§í¬ëŠ” ì œê±°í•˜ê³  ìœ„ì²˜ëŸ¼ ì¢Œìš° ë”°ë¡œ ë‚˜ëˆ ì¤˜ì•¼ í•©ë‹ˆë‹¤.

ğŸ”§ 2ë‹¨ê³„: odom í”„ë ˆì„ ì„¤ì • ë° TF ì—°ê²°
robot_state_publisherì™€ joint_state_publisherë¥¼ launchì— í¬í•¨

diff_drive_controllerë‚˜ ì§ì ‘ ë§Œë“  odometry ë¸Œë¡œë“œìºìŠ¤í„°ë¡œ odom â†’ base_link ë¸Œë¡œë“œìºìŠ¤íŒ… í•„ìš”

bash
ë³µì‚¬
í¸ì§‘
ros2 run robot_state_publisher robot_state_publisher your_robot.urdf
âš™ï¸ 3ë‹¨ê³„: ëª¨í„° ì œì–´ (cmd_vel â†’ ë°”í€´ ì†ë„ ë³€í™˜)
ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì—†ëŠ” ê²½ìš° ì§ì ‘ ROS ë…¸ë“œ ì‘ì„± í•„ìš”

geometry_msgs/Twist â†’ ê° ë°”í€´ ì†ë„ë¡œ ë³€í™˜ (differential drive)

python
ë³µì‚¬
í¸ì§‘
# ì˜ˆ: Pythonìœ¼ë¡œ ì‘ì„±í•œ ê¸°ë³¸ ì œì–´ ë…¸ë“œ
def twist_callback(msg):
    v = msg.linear.x
    omega = msg.angular.z
    v_l = v - (wheel_separation / 2.0) * omega
    v_r = v + (wheel_separation / 2.0) * omega
    # ì—¬ê¸°ì„œ ë°”í€´ ì†ë„ ì „ì†¡: ì˜ˆë¥¼ ë“¤ë©´ PWM, ì‹œë¦¬ì–¼ ë“±ìœ¼ë¡œ
ğŸ—ºï¸ 4ë‹¨ê³„: Navigation2 êµ¬ì„± (SLAM or Static Map)
slam_toolboxë¡œ ë§µ ìƒì„± â†’ ì´í›„ AMCLë¡œ ìœ„ì¹˜ ì¶”ì •

nav2_bringup íŒ¨í‚¤ì§€ì—ì„œ navigation_launch.py ì‹¤í–‰

use_sim_timeì€ Gazebo ì‹œë®¬ì¼ ë•Œë§Œ True

ğŸ§­ 5ë‹¨ê³„: RVizì—ì„œ Waypoint Navigation
RViz ì„¤ì •:

Fixed Frame: map

2D Goal Pose ë²„íŠ¼ í´ë¦­ â†’ ëª©í‘œ ìœ„ì¹˜ ì§€ì •

Navigation2 íŒ¨ë„ ì¶”ê°€í•˜ë©´ Waypoint ê¸°ëŠ¥ë„ ê°€ëŠ¥

ğŸ“¦ ì¶”ê°€ íŒŒì¼ ì •ë¦¬
twist_mux ì•ˆ ì”€
twist_mux ì—†ì´ë„ ë™ì‘ ê°€ëŠ¥ (nav2ê°€ /cmd_velì— ë°”ë¡œ publish)

